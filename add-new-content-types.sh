#!/bin/bash

# HealthierKE - Add New Content Types to Existing Data
# This script guides you through adding the new health content types
# to complement your existing articles

echo "ğŸ¥ HealthierKE - Add New Health Content Types"
echo "=============================================="
echo ""
echo "âœ… You already have great articles about:"
echo "   ğŸ“„ Malaria in Kenya"
echo "   ğŸ“„ Tuberculosis (TB) in Kenya"  
echo "   ğŸ“„ Cervical Cancer in Kenyan Women"
echo "   ğŸ“„ HIV in Kenya Today"
echo "   ğŸ“„ High Blood Pressure"
echo "   ğŸ“„ Typhoid Fever"
echo "   ğŸ“„ Understanding Diabetes in Kenya"
echo ""
echo "ğŸ¯ Now let's add the NEW content types to enhance your platform:"
echo ""

# Function to wait for user confirmation
wait_for_confirmation() {
    read -p "âœ… Press Enter when you've completed this step..."
    echo ""
}

echo "ğŸ”§ FIRST: Enable Public Access for New Content Types"
echo "===================================================="
echo ""
echo "1. Go to: http://localhost:1337/admin/settings/users-permissions/roles"
echo "2. Click on 'Public' role"
echo "3. Enable these permissions:"
echo "   ğŸ“‹ Health-topic: âœ… find, âœ… findOne"
echo "   ğŸ” Symptom: âœ… find, âœ… findOne"
echo "   ğŸ’Š Treatment: âœ… find, âœ… findOne"
echo "4. Click 'Save'"
echo ""

wait_for_confirmation

echo "ğŸ“‹ STEP 1: Create Health Topics (Main Categories)"
echo "================================================"
echo "Navigate to: http://localhost:1337/admin/content-manager/collection-types/api::health-topic.health-topic"
echo ""
echo "Create these 4 main health topics to organize your existing content:"
echo ""

echo "ğŸ¦  Infectious Diseases in Kenya"
echo "   - Name: Infectious Diseases in Kenya"
echo "   - Slug: infectious-diseases-kenya"
echo "   - Description: Information about infectious diseases common in Kenya including malaria, TB, typhoid, and HIV."
echo "   - Is Active: âœ… true"
echo "   - Priority: 100"
echo ""

echo "ğŸ«€ Non-Communicable Diseases"
echo "   - Name: Non-Communicable Diseases" 
echo "   - Slug: non-communicable-diseases"
echo "   - Description: Information about chronic diseases like diabetes, high blood pressure, and cancer affecting Kenyans."
echo "   - Is Active: âœ… true"
echo "   - Priority: 90"
echo ""

echo "ğŸ‘© Women's Health in Kenya"
echo "   - Name: Women's Health in Kenya"
echo "   - Slug: womens-health-kenya"
echo "   - Description: Health information specifically relevant to Kenyan women, including cervical cancer prevention."
echo "   - Is Active: âœ… true"
echo "   - Priority: 85"
echo ""

echo "ğŸš¨ Emergency Health Conditions"
echo "   - Name: Emergency Health Conditions"
echo "   - Slug: emergency-health-conditions"
echo "   - Description: Critical health conditions requiring immediate medical attention in Kenya."
echo "   - Is Active: âœ… true"
echo "   - Priority: 95"
echo ""

wait_for_confirmation

echo "ğŸ©º STEP 2: Create Conditions (Link to Your Articles)"
echo "===================================================="
echo "Navigate to: http://localhost:1337/admin/content-manager/collection-types/api::condition.condition"
echo ""
echo "Create conditions that match your existing articles:"
echo ""

echo "ğŸ¦  Malaria"
echo "   - Name: Malaria"
echo "   - Slug: malaria" 
echo "   - Description: A mosquito-borne infectious disease common in Kenya"
echo "   - Severity: moderate"
echo "   - Is Emergency: false"
echo "   - Color: #E53E3E"
echo "   - Priority: 100"
echo "   - Prevalence in Kenya: Very common, especially in western and coastal regions"
echo ""

echo "ğŸ« Tuberculosis (TB)"
echo "   - Name: Tuberculosis"
echo "   - Slug: tuberculosis"
echo "   - Description: A bacterial infection that mainly affects the lungs"
echo "   - Severity: severe"
echo "   - Is Emergency: false"
echo "   - Color: #D69E2E"
echo "   - Priority: 95"
echo "   - Prevalence in Kenya: One of the highest TB burdens globally"
echo ""

echo "ğŸ©¸ High Blood Pressure"
echo "   - Name: High Blood Pressure"
echo "   - Slug: high-blood-pressure"
echo "   - Description: A condition where blood pressure is consistently high"
echo "   - Severity: moderate"
echo "   - Is Emergency: false"
echo "   - Color: #C53030"
echo "   - Priority: 90"
echo "   - Prevalence in Kenya: Affecting about 24% of Kenyan adults"
echo ""

echo "ğŸ¯ Diabetes"
echo "   - Name: Diabetes"
echo "   - Slug: diabetes"
echo "   - Description: A group of diseases that result in high blood sugar"
echo "   - Severity: moderate" 
echo "   - Is Emergency: false"
echo "   - Color: #3182CE"
echo "   - Priority: 85"
echo "   - Prevalence in Kenya: Rapidly increasing, affecting 2-3% of adults"
echo ""

echo "ğŸ‘© Cervical Cancer"
echo "   - Name: Cervical Cancer"
echo "   - Slug: cervical-cancer"
echo "   - Description: Cancer of the cervix, largely preventable with screening"
echo "   - Severity: severe"
echo "   - Is Emergency: false"
echo "   - Color: #B794F6"
echo "   - Priority: 80"
echo "   - Prevalence in Kenya: Leading cause of cancer death in Kenyan women"
echo ""

echo "ğŸ¤’ Typhoid Fever"
echo "   - Name: Typhoid Fever"
echo "   - Slug: typhoid-fever"
echo "   - Description: A bacterial infection spread through contaminated food/water"
echo "   - Severity: severe"
echo "   - Is Emergency: false"  
echo "   - Color: #38B2AC"
echo "   - Priority: 75"
echo "   - Prevalence in Kenya: Common due to poor sanitation in some areas"
echo ""

echo "ğŸ©¸ HIV/AIDS"
echo "   - Name: HIV/AIDS"
echo "   - Slug: hiv-aids"
echo "   - Description: Human Immunodeficiency Virus infection"
echo "   - Severity: severe"
echo "   - Is Emergency: false"
echo "   - Color: #805AD5"
echo "   - Priority: 95"
echo "   - Prevalence in Kenya: Approximately 4.9% of adults (much improved from peak)"
echo ""

wait_for_confirmation

echo "ğŸ” STEP 3: Create Key Symptoms"
echo "==============================="
echo "Navigate to: http://localhost:1337/admin/content-manager/collection-types/api::symptom.symptom"
echo ""
echo "Create common symptoms that link to your conditions:"
echo ""

echo "ğŸ¤’ Fever"
echo "   - Name: Fever"
echo "   - Slug: fever"
echo "   - Description: Body temperature higher than normal, often indicating infection"
echo "   - Common Severity: mild"
echo "   - Body System: general"
echo "   - When to Seek Care: routine_checkup"
echo "   - Common in Kenya: âœ… true"
echo ""

echo "ğŸ˜´ Persistent Fatigue"
echo "   - Name: Persistent Fatigue"
echo "   - Slug: persistent-fatigue"
echo "   - Description: Ongoing tiredness that doesn't improve with rest"
echo "   - Common Severity: moderate"
echo "   - Body System: general"
echo "   - When to Seek Care: routine_checkup"
echo "   - Common in Kenya: âœ… true"
echo ""

echo "ğŸ’” Chest Pain"
echo "   - Name: Chest Pain"
echo "   - Slug: chest-pain"
echo "   - Description: Pain or discomfort in the chest area"
echo "   - Common Severity: severe"
echo "   - Body System: cardiovascular"
echo "   - When to Seek Care: emergency"
echo "   - Common in Kenya: âœ… true"
echo ""

echo "ğŸ« Persistent Cough"
echo "   - Name: Persistent Cough"
echo "   - Slug: persistent-cough"
echo "   - Description: Cough lasting more than 2-3 weeks"
echo "   - Common Severity: moderate"
echo "   - Body System: respiratory"
echo "   - When to Seek Care: urgent"
echo "   - Common in Kenya: âœ… true"
echo ""

echo "ğŸ©¸ Unusual Bleeding"
echo "   - Name: Unusual Bleeding"
echo "   - Slug: unusual-bleeding"
echo "   - Description: Abnormal bleeding between periods or after menopause"
echo "   - Common Severity: moderate"
echo "   - Body System: reproductive"
echo "   - When to Seek Care: urgent"
echo "   - Common in Kenya: âœ… true"
echo ""

wait_for_confirmation

echo "ğŸ’Š STEP 4: Create Common Treatments"
echo "===================================="
echo "Navigate to: http://localhost:1337/admin/content-manager/collection-types/api::treatment.treatment"
echo ""
echo "Create treatments available in Kenya:"
echo ""

echo "ğŸ’Š Antimalarial Medication"
echo "   - Name: Antimalarial Medication"
echo "   - Slug: antimalarial-medication"
echo "   - Description: Medications to treat and prevent malaria"
echo "   - Type: medication"
echo "   - Estimated Cost: low"
echo "   - Available in Kenya: âœ… true"
echo "   - Requires Prescription: âœ… true"
echo ""

echo "ğŸ’Š TB Treatment (DOTS)"
echo "   - Name: TB Treatment (DOTS)"
echo "   - Slug: tb-treatment-dots"
echo "   - Description: Directly Observed Treatment Short-course for tuberculosis"
echo "   - Type: medication"
echo "   - Estimated Cost: low"
echo "   - Available in Kenya: âœ… true"
echo "   - Requires Prescription: âœ… true"
echo ""

echo "ğŸ’Š Blood Pressure Medication"
echo "   - Name: Blood Pressure Medication"
echo "   - Slug: blood-pressure-medication"
echo "   - Description: Medications to control high blood pressure"
echo "   - Type: medication"
echo "   - Estimated Cost: moderate"
echo "   - Available in Kenya: âœ… true"
echo "   - Requires Prescription: âœ… true"
echo ""

echo "ğŸƒ Lifestyle Changes"
echo "   - Name: Lifestyle Changes"
echo "   - Slug: lifestyle-changes"
echo "   - Description: Diet, exercise, and behavior modifications for health"
echo "   - Type: lifestyle"
echo "   - Estimated Cost: low"
echo "   - Available in Kenya: âœ… true"
echo "   - Requires Prescription: false"
echo ""

echo "ğŸ©º Regular Screening"
echo "   - Name: Regular Health Screening"
echo "   - Slug: regular-health-screening"
echo "   - Description: Preventive health checkups and screenings"
echo "   - Type: therapy"
echo "   - Estimated Cost: moderate"
echo "   - Available in Kenya: âœ… true"
echo "   - Requires Prescription: false"
echo ""

wait_for_confirmation

echo "ğŸ”— STEP 5: Link Everything Together"
echo "===================================="
echo ""
echo "Now connect your existing articles to the new content:"
echo ""
echo "1ï¸âƒ£ Edit your EXISTING ARTICLES:"
echo "   ğŸ“„ 'Malaria in Kenya' â†’ Related Conditions: Malaria"
echo "   ğŸ“„ 'Tuberculosis (TB) in Kenya' â†’ Related Conditions: Tuberculosis"
echo "   ğŸ“„ 'High Blood Pressure' â†’ Related Conditions: High Blood Pressure"
echo "   ğŸ“„ 'Understanding Diabetes' â†’ Related Conditions: Diabetes"
echo "   ğŸ“„ 'Cervical Cancer in Kenyan Women' â†’ Related Conditions: Cervical Cancer"
echo "   ğŸ“„ 'Typhoid Fever' â†’ Related Conditions: Typhoid Fever"
echo "   ğŸ“„ 'HIV in Kenya Today' â†’ Related Conditions: HIV/AIDS"
echo ""
echo "2ï¸âƒ£ Edit your CONDITIONS to link back:"
echo "   ğŸ©º Each condition â†’ Related Articles: Link to corresponding article"
echo ""
echo "3ï¸âƒ£ Link SYMPTOMS to CONDITIONS:"
echo "   ğŸ¤’ Fever â†’ Malaria, Typhoid Fever, TB"
echo "   ğŸ˜´ Persistent Fatigue â†’ HIV/AIDS, Diabetes"
echo "   ğŸ’” Chest Pain â†’ High Blood Pressure (emergency cases)"
echo "   ğŸ« Persistent Cough â†’ Tuberculosis"
echo "   ğŸ©¸ Unusual Bleeding â†’ Cervical Cancer"
echo ""
echo "4ï¸âƒ£ Link TREATMENTS to CONDITIONS:"
echo "   ğŸ’Š Antimalarial Medication â†’ Malaria"
echo "   ğŸ’Š TB Treatment (DOTS) â†’ Tuberculosis"
echo "   ğŸ’Š Blood Pressure Medication â†’ High Blood Pressure"
echo "   ğŸƒ Lifestyle Changes â†’ Diabetes, High Blood Pressure"
echo "   ğŸ©º Regular Screening â†’ Cervical Cancer"
echo ""

wait_for_confirmation

echo "ğŸ§ª STEP 6: Test Your Enhanced Platform"
echo "======================================"
echo ""
echo "Run this command to test all your new content:"
echo "   ./test-api-phase6.sh"
echo ""
echo "You should now see:"
echo "   ğŸ“‹ Health Topics: 4 topics"
echo "   ğŸ©º Conditions: 7 conditions"
echo "   ğŸ” Symptoms: 5 symptoms"
echo "   ğŸ’Š Treatments: 5 treatments"
echo "   ğŸ“„ Articles: Your existing articles (now enhanced!)"
echo ""

wait_for_confirmation

echo "ğŸ‰ CONGRATULATIONS!"
echo "==================="
echo ""
echo "âœ… You've successfully enhanced HealthierKE with:"
echo "   ğŸ“‹ 4 Health Topics to organize content"
echo "   ğŸ©º 7 Conditions matching your existing articles"
echo "   ğŸ” 5 Key symptoms for early detection"
echo "   ğŸ’Š 5 Treatment options available in Kenya"
echo "   ğŸ”— Full relationships between all content"
echo ""
echo "ğŸ‡°ğŸ‡ª Your platform now provides:"
echo "   ğŸ“± Mobile-optimized health information"
echo "   ğŸš¨ Emergency guidance with 999 integration"
echo "   ğŸ©º Medical content validation"
echo "   ğŸ” Advanced health content search"
echo "   âš¡ High-performance API responses"
echo ""
echo "ğŸš€ HealthierKE is now Kenya's comprehensive health information platform!"
echo ""
echo "ğŸ“ Next steps:"
echo "1. Test all the new relationships in the admin panel"
echo "2. Add more symptoms and treatments as needed"
echo "3. Consider adding images/icons to make content more engaging"
echo "4. Test the API endpoints with your frontend application"
echo ""